{"mappings":"gfAAA,IAkBAA,EAAe,CACbC,KAnBW,SAACC,EAAKC,GACjB,IACE,IAAMC,EAAkBC,KAAKC,UAAUH,GACvCI,aAAaC,QAAQN,EAAKE,E,CAC1B,MAAOK,GACPC,QAAQD,MAAM,oBAAqBA,EAAME,Q,GAe3CC,KAXW,SAAAV,GACX,IACE,IAAME,EAAkBG,aAAaM,QAAQX,GAC7C,OAA2B,OAApBE,OAA2BU,EAAYT,KAAKU,MAAMX,E,CACzD,MAAOK,GACPC,QAAQD,MAAM,oBAAqBA,EAAME,Q,iBCXvCK,EAAO,CACXC,OAAQC,SAASC,cAAc,qBAG7BC,EAAW,IACf,WACE,IAAMC,EAAiBrB,EAAoBY,KAAK,uBAChD,QAAuBE,IAAnBO,EAAJ,C,IAGKC,GAAS,EAATC,GAAS,EAATC,OAASV,E,IAAd,QAAKW,EAAAC,EAAaC,OAAOC,KAAKP,GAAeQ,OAAAC,cAAxCR,GAAAG,EAAAC,EAASK,QAAAC,MAATV,GAAS,GAAT,IAAMpB,EAANuB,EAAStB,MACRkB,EAAeY,eAAe/B,KAChCc,EAAKC,OAAOiB,SAAShC,GAAKC,MAAQkB,EAAenB,G,WAFhDqB,GAAS,EAATC,EAASW,C,aAATb,GAAS,MAATI,EAASU,QAATV,EAASU,Q,YAATb,E,MAAAC,C,EAKLJ,EAAWC,CAPT,C,CASJgB,GASArB,EAAKC,OAAOqB,iBACV,QACAC,EAAAC,UAAW,SAAAC,GACT,IAAQC,EAA+BD,EAA/BE,OACFC,EAAOF,EAAmBE,KAC1BzC,EAAQuC,EAAmBvC,MAEjCiB,EAASwB,GAAQzC,EACjBH,EAAoBC,KAAK,sBAAuBmB,E,GAC/C,MAELJ,EAAKC,OAAOqB,iBAAiB,UAlB7B,SAAwBG,GACtBA,EAAMI,iBACNJ,EAAME,OAAOG,QACbvC,aAAawC,WAAW,uBACxBrC,QAAQsC,IAAI5B,GACZA,EAAW,E","sources":["src/js/localstorage.js","src/js/03-feedback.js"],"sourcesContent":["const save = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n};\n\nconst load = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n};\n\nexport default {\n  save,\n  load,\n};\n","import localStorageService from './localstorage';\nconst _ = require('lodash');\n\nconst refs = {\n  formEl: document.querySelector('.js-contact-form'),\n};\n\nlet userData = {};\nfunction fillContactForm() {\n  const userDataFromLs = localStorageService.load('feedback-form-state');\n  if (userDataFromLs === undefined) {\n    return;\n  }\n  for (const key of Object.keys(userDataFromLs)) {\n    if (userDataFromLs.hasOwnProperty(key)) {\n      refs.formEl.elements[key].value = userDataFromLs[key];\n    }\n  }\n  userData = userDataFromLs;\n}\nfillContactForm();\n\nfunction onFormElSubmit(event) {\n  event.preventDefault();\n  event.target.reset();\n  localStorage.removeItem('feedback-form-state');\n  console.log(userData);\n  userData = {};\n}\nrefs.formEl.addEventListener(\n  'input',\n  _.throttle(event => {\n    const { target: contactFormElement } = event;\n    const name = contactFormElement.name;\n    const value = contactFormElement.value;\n\n    userData[name] = value;\n    localStorageService.save('feedback-form-state', userData);\n  }, 500)\n);\nrefs.formEl.addEventListener('submit', onFormElSubmit);\n"],"names":["$50116558f77987dc$export$2e2bcd8739ae039","save","key","value","serializedState","JSON","stringify","localStorage","setItem","error","console","message","load","getItem","undefined","parse","$b00c40859be242c5$var$refs","formEl","document","querySelector","$b00c40859be242c5$var$userData","userDataFromLs","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Object","keys","Symbol","iterator","next","done","hasOwnProperty","elements","err","return","$b00c40859be242c5$var$fillContactForm","addEventListener","$1WSnx","throttle","event","contactFormElement","target","name","preventDefault","reset","removeItem","log"],"version":3,"file":"03-feedback.d1de5d6b.js.map"}