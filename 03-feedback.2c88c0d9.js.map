{"mappings":"weAkBAA,EAAe,C,KAlBF,CAACC,EAAKC,KACjB,IACE,MAAMC,EAAkBC,KAAKC,UAAUH,GACvCI,aAAaC,QAAQN,EAAKE,E,CAC1B,MAAOK,GACPC,QAAQD,MAAM,oBAAqBA,EAAME,Q,QAIhCT,IACX,IACE,MAAME,EAAkBG,aAAaK,QAAQV,GAC7C,OAA2B,OAApBE,OAA2BS,EAAYR,KAAKS,MAAMV,E,CACzD,MAAOK,GACPC,QAAQD,MAAM,oBAAqBA,EAAME,Q,iBCX7C,MAAMI,EAAO,CACXC,OAAQC,SAASC,cAAc,qBAGjC,IAAIC,EAAW,IACf,WACE,MAAMC,EAAiBnB,EAAoBoB,KAAK,uBAChD,QAAuBR,IAAnBO,EAAJ,CAGA,IAAK,MAAMlB,KAAOoB,OAAOC,KAAKH,GACxBA,EAAeI,eAAetB,KAChCa,EAAKC,OAAOS,SAASvB,GAAKC,MAAQiB,EAAelB,IAGrDiB,EAAWC,CAPT,C,CASJM,GASAX,EAAKC,OAAOW,iBACV,QACAC,EAAAC,UAAWC,IACT,MAAQC,OAAQC,GAAuBF,EACjCG,EAAOD,EAAmBC,KAC1B9B,EAAQ6B,EAAmB7B,MAEjCgB,EAASc,GAAQ9B,EACjBF,EAAoBiC,KAAK,sBAAuBf,EAAS,GACxD,MAELJ,EAAKC,OAAOW,iBAAiB,UAlB7B,SAAwBG,GACtBA,EAAMK,iBACNL,EAAMC,OAAOK,QACb7B,aAAa8B,WAAW,uBACxB3B,QAAQ4B,IAAInB,GACZA,EAAW,E","sources":["src/js/localstorage.js","src/js/03-feedback.js"],"sourcesContent":["const save = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n};\n\nconst load = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n};\n\nexport default {\n  save,\n  load,\n};\n","import localStorageService from './localstorage';\nconst _ = require('lodash');\n\nconst refs = {\n  formEl: document.querySelector('.js-contact-form'),\n};\n\nlet userData = {};\nfunction fillContactForm() {\n  const userDataFromLs = localStorageService.load('feedback-form-state');\n  if (userDataFromLs === undefined) {\n    return;\n  }\n  for (const key of Object.keys(userDataFromLs)) {\n    if (userDataFromLs.hasOwnProperty(key)) {\n      refs.formEl.elements[key].value = userDataFromLs[key];\n    }\n  }\n  userData = userDataFromLs;\n}\nfillContactForm();\n\nfunction onFormElSubmit(event) {\n  event.preventDefault();\n  event.target.reset();\n  localStorage.removeItem('feedback-form-state');\n  console.log(userData);\n  userData = {};\n}\nrefs.formEl.addEventListener(\n  'input',\n  _.throttle(event => {\n    const { target: contactFormElement } = event;\n    const name = contactFormElement.name;\n    const value = contactFormElement.value;\n\n    userData[name] = value;\n    localStorageService.save('feedback-form-state', userData);\n  }, 500)\n);\nrefs.formEl.addEventListener('submit', onFormElSubmit);\n"],"names":["$89a4baeedb6cdec9$export$2e2bcd8739ae039","key","value","serializedState","JSON","stringify","localStorage","setItem","error","console","message","getItem","undefined","parse","$945622fd0f572e60$var$refs","formEl","document","querySelector","$945622fd0f572e60$var$userData","userDataFromLs","load","Object","keys","hasOwnProperty","elements","$945622fd0f572e60$var$fillContactForm","addEventListener","$kEUo3","throttle","event","target","contactFormElement","name","save","preventDefault","reset","removeItem","log"],"version":3,"file":"03-feedback.2c88c0d9.js.map"}